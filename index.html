<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>toby</title>

<style>
  :root{
    --bg:#0f1724;
    --card-bg:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    --shadow:0 10px 30px rgba(2,6,23,0.6);
    --size-min:220px;
    --size-max:520px;
  }

  *{box-sizing:border-box}
  html,body{
    height:100%; margin:0; background:var(--bg);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
    display:flex; align-items:center; justify-content:center;
    color:#fff; -webkit-font-smoothing:antialiased;
  }

  .stage{
    width:min(92vw,1100px);
    height:min(82vh,800px);
    display:grid; place-items:center;
    perspective:1100px;
    user-select:none; touch-action:none;
  }

  .card{
    width:clamp(var(--size-min),45vw,var(--size-max));
    aspect-ratio:3/4;
    display:flex; align-items:center; justify-content:center;
    background:var(--card-bg); border-radius:18px;
    box-shadow:var(--shadow);
    transform-style:preserve-3d; padding:14px;
    transition:box-shadow .24s ease;
  }

  .look-img{
    width:100%; height:100%;
    object-fit:cover; border-radius:12px;
    transform-origin:center;
    transition:transform .3s cubic-bezier(.15,.9,.25,1), filter .3s;
    box-shadow:0 6px 20px rgba(2,6,23,0.45),
               inset 0 -6px 18px rgba(0,0,0,0.08);
  }

  .glare{
    position:absolute; inset:0; border-radius:12px;
    pointer-events:none; opacity:0;
    mix-blend-mode:screen;
    background:radial-gradient(600px 300px at 20% 20%,
      rgba(255,255,255,0.12), transparent 12%);
    transition:opacity .3s;
    transform:translateZ(60px) scale(1.05);
  }

  .card-wrapper{position:relative; width:100%; height:100%}

  .caption{
    position:fixed; bottom:18px;
    left:50%; transform:translateX(-50%);
    font-size:13px; opacity:.6;
  }
</style>
</head>

<body>

<div class="stage" id="stage">
  <div class="card" id="card">
    <div class="card-wrapper">

      <img class="look-img" id="lookImg"
        src="https://soggycatgqwehnetanamny.pages.dev/toby.png"
        alt="Centered image" width="800" height="1066" loading="lazy" />

      <div class="glare" id="glare"></div>
    </div>
  </div>
</div>

<div class="caption">
  toby the cat - made with chatgpt
  <a href="https://github.com/benny-flops2/soggycatgqwehnetanamny" target="_blank" style="
    margin-left:8px; padding:2px 6px;
    border-radius:4px; background:rgba(255,255,255,.12);
    color:#fff; text-decoration:none; backdrop-filter:blur(4px);
  ">source</a>
</div>

<script>
(function(){
  const stage = document.getElementById('stage');
  const card = document.getElementById('card');
  const img = document.getElementById('lookImg');
  const glare = document.getElementById('glare');

  const cfg = {maxTilt:12, maxTranslate:12, glareMaxOpacity:.35, ease:.12};

  let width=0, height=0, left=0, top=0;
  let targetX=0, targetY=0;
  let currentX=0, currentY=0;
  let rafId=null, pointerActive=false;

  function updateRect(){
    const r=card.getBoundingClientRect();
    width=r.width; height=r.height; left=r.left; top=r.top;
  }

  function pointerToNorm(x,y){
    const nx=((x-left)-width/2)/(width/2);
    const ny=((y-top)-height/2)/(height/2);
    return [Math.max(-1,Math.min(1,nx)), Math.max(-1,Math.min(1,ny))];
  }

  function onMove(e){
    if(e.touches) e=e.touches[0];
    const[nx,ny]=pointerToNorm(e.clientX,e.clientY);
    targetX=ny; targetY=nx; pointerActive=true;
    startRAF();
  }

  function onLeave(){ targetX=0; targetY=0; pointerActive=false; }

  const lerp=(a,b,t)=>a+(b-a)*t;

  function animate(){
    currentX=lerp(currentX,targetX,cfg.ease);
    currentY=lerp(currentY,targetY,cfg.ease);

    const rX=currentX*cfg.maxTilt*-1;
    const rY=currentY*cfg.maxTilt;
    const tX=currentY*cfg.maxTranslate*-1;
    const tY=currentX*cfg.maxTranslate*-1;

    img.style.transform=`rotateX(${rX}deg) rotateY(${rY}deg) translate3d(${tX}px,${tY}px,28px) scale(1.01)`;

    card.style.transform=`rotateX(${rX*.45}deg) rotateY(${rY*.45}deg)`;

    const gX=(currentY*50)+50;
    const gY=(currentX*-35)+50;
    glare.style.background=`radial-gradient(600px 300px at ${gX}% ${gY}%, rgba(255,255,255,.14), transparent 12%)`;
    glare.style.opacity=lerp(parseFloat(glare.style.opacity||0), pointerActive?cfg.glareMaxOpacity*Math.abs(currentX):0, cfg.ease);

    if(Math.abs(currentX-targetX)<0.0005 && Math.abs(currentY-targetY)<0.0005 && !pointerActive){
      cancelAnimationFrame(rafId); rafId=null; return;
    }
    rafId=requestAnimationFrame(animate);
  }

  const startRAF=()=>!rafId&&(rafId=requestAnimationFrame(animate));

  if(window.PointerEvent){
    card.addEventListener('pointermove',onMove,{passive:true});
    card.addEventListener('pointerleave',onLeave);
  } else {
    window.addEventListener('mousemove',onMove);
    card.addEventListener('mouseleave',onLeave);
    card.addEventListener('touchmove',onMove,{passive:true});
    card.addEventListener('touchend',onLeave);
  }

  window.addEventListener('resize',updateRect);
  updateRect();
})();
</script>

</body>
</html>
